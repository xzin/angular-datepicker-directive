sampleApp.directive("calendar",function(){return{restrict:"E",transclude:!0,scope:!0,templateUrl:"calendar-template",link:function(e,t,a){function n(){var a=angular.element(t[0].querySelectorAll(".days span"));a.bind("click",function(t){var n=this.getAttribute("data-day");null!=n&&(angular.forEach(a,function(e){e.classList.remove("active")}),this.classList.toggle("active"),e.$apply(function(){e.userDate=n+" "+e.date}))})}function r(e,a,r){var l=angular.element(t[0].querySelector(".days"));l.html("");for(var i=new Date(r,a+1,1,-1).getDate(),o=new Date(r,a,1).getDay(),s=0;s<o;s++)l.append("<span>&nbsp;</span>");for(var s=1;s<=i;s++)l.append("<span data-day="+s+">"+s+"</span>");n()}function l(e){return e.toLocaleString(window.navigator.language,{month:"long"})+" "+e.getFullYear()}e.$parent.$watch("pickerShow",function(t){e.showPicker=t}),e.today=new Date,e.date=l(e.today),e.userTime=function(e){var t=e.getHours(),a=e.getMinutes();return(t>9?t:"0"+t)+":"+(a>9?a:"0"+a)}(e.today),function(){var e=function(){for(var e=0,t=[];e<7;){var a=new Date(0,0,e);t.push(a.toLocaleString(window.navigator.language,{weekday:"short"})),e++}return t}(),a=angular.element(t[0].querySelector(".weekNames"));e.forEach(function(e,t,n){a.append("<span>"+e+" </span>")})}(),r(t,e.today.getMonth(),e.today.getFullYear()),e.nextMonth=function(a){e.today=new Date(a.getFullYear(),a.getMonth()+1,a.getDate()),e.date=l(e.today),r(t,a.getMonth()+1,a.getFullYear())},e.prevMonth=function(a){e.today=new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),e.date=l(e.today),r(t,a.getMonth()-1,a.getFullYear())},e.timeFormat=function(e){if(e.replace(/[0-9:]/g,"").length>0)str=e.slice(0,-1);else if(e.length>5)str=e.slice(0,-1);else if(e.split(":").length>2)str=e.slice(0,-1);else if(2==e.length)str=e>=24?"23:":e+":";else if(e.slice(3,5)>59)str=e.split(":")[0]+":59";else if(e.indexOf(":")>-1&&2!=e.indexOf(":")){var t=e.split("");t.splice(1,1),t.splice(2,0,":"),str=t.join("")}else if(-1==e.indexOf(":")&&e.length>2){var t=e.split("");t.splice(2,0,":"),str=t.join("")}else str=e;return str},e.setDate=function(){e.userDate&&e.userTime&&(e.$parent.dateTime=e.userDate+", "+e.userTime)},e.undoSelect=function(){e.userDate="",e.$parent.dateTime=""}}}});